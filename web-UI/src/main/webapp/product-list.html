<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<!--[if lt IE 9]>
	<script type="text/javascript" src="lib/html5shiv.js"></script>
	<script type="text/javascript" src="lib/respond.min.js"></script>
	<![endif]-->
<link rel="stylesheet" type="text/css" href="static/h-ui/css/H-ui.min.css" />
<link rel="stylesheet" type="text/css" href="static/h-ui.admin/css/H-ui.admin.css" />
<link rel="stylesheet" type="text/css" href="lib/Hui-iconfont/1.0.8/iconfont.css" />
<link rel="stylesheet" type="text/css" href="static/h-ui.admin/skin/default/skin.css" id="skin" />
<link rel="stylesheet" type="text/css" href="static/h-ui.admin/css/style.css" />
<link rel="stylesheet" type="text/css" href="dist/css/layui.css" />
<!--[if IE 6]>
	<script type="text/javascript" src="lib/DD_belatedPNG_0.0.8a-min.js"></script>
	<script>DD_belatedPNG.fix('*');</script>
	<![endif]-->
<title>建材列表</title>
<link rel="stylesheet" href="css/SimpleTree.css" type="text/css">
<link rel="stylesheet" href="lib/zTree/v3/css/zTreeStyle/zTreeStyle.css" type="text/css">
<style type="text/css">
	table{
		/* 只有定义了表格的布局算法为fixed，下面td的定义才能起作用。 */
		table-layout:fixed;
	}
	td{
		overflow:hidden;
		/* 保持固定高度 */
		word-break: keep-all;
		/* 内容超出宽度时隐藏超出部分的内容 */
		white-space:nowrap;
		/* 当对象内文本溢出时显示省略标记(...) ；需与overflow:hidden;一起使用。*/
		text-overflow:ellipsis;
		text-align: center;
	}
</style>
</head>
<body class="pos-r">
<div class="pos-a" style="width:150px;left:0;top:0; bottom:0; height:100%; border-right:1px solid #e5e5e5; background-color:#f5f5f5; overflow:auto;">
    <div class="st_tree" style="width:200px;margin:0 auto;">
        <ul>
            <!--<li><a href="#" ref="hyjm">欢迎界面</a></li>-->
            <li><a href="#" ref="xtgl">手表系列</a></li>
            <ul show="true">
                <li><a href="#" ref="yhgl">星座系列</a></li>
                <li><a href="#" ref="rzck">碟飞系列</a></li>
                <li><a href="#" ref="rzck">海马系列</a></li>
                <li><a href="#" ref="rzck">特别系列</a></li>
                <li><a href="#" ref="rzck">超霸系列</a></li>
            </ul>
            <li><a href="#" ref="xtgl">配件系列</a></li>
            <ul show="true">
                <li><a href="#" ref="yhgl">珠宝</a></li>
                <li><a href="#" ref="rzck">配饰</a></li>
            </ul>
            <!--<li><a href="#" ref="ckgl">仓库管理</a></li>-->
            <!--<ul>-->
                <!--<li><a href="#" ref="kcgl">库存管理</a></li>-->
                <!--<li><a href="#" ref="shgl">收货管理</a></li>-->
                <!--<li><a href="#" ref="fhgl">发货管理</a></li>-->
                <!--&lt;!&ndash;<ul>&ndash;&gt;-->
                    <!--&lt;!&ndash;<li><a href="#" ref="yhgl">用户管理</a></li>&ndash;&gt;-->
                    <!--&lt;!&ndash;<li><a href="#" ref="rzck">日志查看</a></li>&ndash;&gt;-->
                <!--&lt;!&ndash;</ul>&ndash;&gt;-->
            <!--</ul>-->
        </ul>
    </div>
</div>
<div style="margin-left:140px;">
	<nav class="breadcrumb"><i class="Hui-iconfont">&#xe67f;</i> 首页 <span class="c-gray en">&gt;</span> 产品管理 <span class="c-gray en">&gt;</span> 产品列表 <a class="btn btn-success radius r" style="line-height:1.6em;margin-top:3px" href="javascript:location.replace(location.href);" title="刷新" ><i class="Hui-iconfont">&#xe68f;</i></a></nav>
	<div class="page-container">
		<div class="text-c">
			商品名称：<input type="text" id="ComName" name="ComName" class="input-text " style="width: 150px">
			型号：<input type="text" id="ComModel" name="ComModel" class="input-text " style="width: 150px">
			类型：<input type="text"  id="ComType" name="ComType" class="input-text " style="width: 150px">
			<button name="" id="selectOMGtj" class="btn btn-success" type="submit" ><i class="Hui-iconfont">&#xe665;</i> 搜产品</button>
		</div>
		<div class="cl pd-5 bg-1 bk-gray mt-20"> <span class="l"><a href="javascript:;" onclick="OMGProduct.delsOmg_product()" class="btn btn-danger radius"><i class="Hui-iconfont">&#xe6e2;</i> 批量删除</a> <a class="btn btn-primary radius" onclick="product_add('添加产品','product-add.html')" href="javascript:;"><i class="Hui-iconfont">&#xe600;</i> 添加产品</a></span> <span class="r">共有数据：<strong id="count"></strong> 条</span> </div>
		<div class="mt-20">
			<div style="overflow: auto; width: 100%;">
			<table id="OMGshow_product" class="table table-border table-bordered table-bg table-hover " style="width: 100%;height: 120px; ">
				<thead>
					<tr class="text-c">
						<th ><input name="" type="checkbox" value=""></th>
						<th>ID</th>
						<th>名称</th>
						<!--<th>型号</th>-->
						<th>价格</th>
						<!--<th>描述</th>-->
						<!--<th>状态</th>-->
						<th>封面</th>
						<th>类型</th>
						<!--<th>表壳</th>-->
						<!--<th>表链</th>-->
						<!--<th>颜色</th>-->
						<!--<th>直径</th>-->
						<!--<th>特色</th>-->
						<!--<th>机芯</th>-->
						<!--<th>防水</th>-->
						<th>发布状态</th>
						<th>操作</th>
					</tr>
				</thead>
				<tbody>
					<!--<tr class="text-c va-m">-->
						<!--<td><input name="" type="checkbox" value=""></td>-->
						<!--<td>001</td>-->
						<!--<td><a onClick="product_show('哥本哈根橡木地板','product-show.html','10001')" href="javascript:;"><img width="60" class="product-thumb" src="temp/product/Thumb/6204.jpg"></a></td>-->
						<!--<td class="text-l"><a style="text-decoration:none" onClick="product_show('哥本哈根橡木地板','product-show.html','10001')" href="javascript:;"><img title="国内品牌" src="static/h-ui.admin/images/cn.gif"> <b class="text-success">圣象</b> 哥本哈根橡木地板KS8373</a></td>-->
						<!--<td class="text-l">原木的外在,实木条形结构,色泽花纹自然,写意;款式设计吸取实木地板的天然去雕饰之美,在视觉上给人带来深邃联想.多款产品适合搭配不同的风格的室内装饰;功能流露出尊贵典雅的大气韵味。</td>-->
						<!--<td><span class="price">356.0</span> 元/平米</td>-->
						<!--<td class="td-status"><span class="label label-success radius">已发布</span></td>-->
						<!--<td class="td-manage"><a style="text-decoration:none" onClick="product_stop(this,'10001')" href="javascript:;" title="下架"><i class="Hui-iconfont">&#xe6de;</i></a> <a style="text-decoration:none" class="ml-5" onClick="product_edit('产品编辑','product-add.html','10001')" href="javascript:;" title="编辑"><i class="Hui-iconfont">&#xe6df;</i></a> <a style="text-decoration:none" class="ml-5" onClick="product_del(this,'10001')" href="javascript:;" title="删除"><i class="Hui-iconfont">&#xe6e2;</i></a></td>-->
					<!--</tr>-->
				</tbody>
			</table>
			</div>
		</div>
	</div>
	<div id="demo0" style="text-align: center"></div>
</div>

<!--_footer 作为公共模版分离出去-->
<script type="text/javascript" src="lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="lib/layer/2.4/layer.js"></script>
<script type="text/javascript" src="static/h-ui/js/H-ui.min.js"></script>
<script type="text/javascript" src="static/h-ui.admin/js/H-ui.admin.js"></script> <!--/_footer 作为公共模版分离出去-->

<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript" src="lib/zTree/v3/js/jquery.ztree.all-3.5.min.js"></script>
<script type="text/javascript" src="lib/My97DatePicker/4.8/WdatePicker.js"></script>
<script type="text/javascript" src="lib/datatables/1.10.0/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="lib/laypage/1.2/laypage.js"></script>
<script type="text/javascript" src="dist/layui.all.js"></script>
<script type="text/javascript" src="js/SimpleTree.js"></script>
<script type="text/javascript">
    // var setting = {
    //     view: {
    //         dblClickExpand: false,
    //         showLine: false,
    //         selectedMulti: false
    //     },
    //     data: {
    //         simpleData: {
    //             enable:true,
    //             idKey: "id",
    //             pIdKey: "pId",
    //             rootPId: ""
    //         }
    //     },
    //     callback: {
    //         beforeClick: function(treeId, treeNode) {
    //             var zTree = $.fn.zTree.getZTreeObj("tree");
    //             if (treeNode.isParent) {
    //                 zTree.expandNode(treeNode);
    //                 return false;
    //             } else {
    //                 //demoIframe.attr("src",treeNode.file + ".html");
    //                 return true;
    //             }
    //         }
    //     }
    // };
    // var zNodes =[
    //     { id:1, pId:0, name:"产品系列", open:true},
    //     { id:11, pId:1, name:"星座系列"},
    //     { id:111, pId:11, name:"三级分类"},
    //     { id:112, pId:11, name:"三级分类"},
    //     { id:113, pId:11, name:"三级分类"},
    //     { id:114, pId:11, name:"三级分类"},
    //     { id:115, pId:11, name:"三级分类"},
    //     { id:12, pId:1, name:"碟飞系列"},
    //     { id:111, pId:12, name:"三级分类"},
    //     { id:13, pId:1, name:"海马系列"},
    //     { id:111, pId:13, name:"三级分类"},
    //     { id:14, pId:1, name:"特别系列"},
    //     { id:111, pId:14, name:"三级分类"},
    //     { id:15, pId:1, name:"超霸系列"},
    //     { id:111, pId:15, name:"三级分类"},
    // ];


    //
    // $(document).ready(function(){
    //     var t = $("#treeDemo");
    //     t = $.fn.zTree.init(t, setting, zNodes);
    //     //demoIframe = $("#testIframe");
    //     //demoIframe.on("load", loadReady);
    //     var zTree = $.fn.zTree.getZTreeObj("tree");
    //     //zTree.selectNode(zTree.getNodeByParam("id",'11'));
    // });

    $('.table-sort').dataTable({
        "aaSorting": [[ 1, "desc" ]],//默认第几个排序
        "bStateSave": true,//状态保存
        "aoColumnDefs": [
            {"orderable":false,"aTargets":[0,7]}// 制定列不参与排序
        ]
    });
    /*产品-添加*/
    function product_add(title,url){
        var index = layer.open({
            type: 2,
            title: title,
            content: url
        });
        layer.full(index);
    }
    /*产品-查看*/
    function product_show(title,url,id){
        var index = layer.open({
            type: 2,
            title: title,
            content: url
        });
        layer.full(index);
    }
    /*产品-审核*/
    function product_shenhe(obj,id){
        layer.confirm('审核文章？', {
                btn: ['通过','不通过'],
                shade: false
            },
            function(){
                $(obj).parents("tr").find(".td-manage").prepend('<a class="c-primary" onClick="product_start(this,id)" href="javascript:;" title="申请上线">申请上线</a>');
                $(obj).parents("tr").find(".td-status").html('<span class="label label-success radius">已发布</span>');
                $(obj).remove();
                layer.msg('已发布', {icon:6,time:1000});
            },
            function(){
                $(obj).parents("tr").find(".td-manage").prepend('<a class="c-primary" onClick="product_shenqing(this,id)" href="javascript:;" title="申请上线">申请上线</a>');
                $(obj).parents("tr").find(".td-status").html('<span class="label label-danger radius">未通过</span>');
                $(obj).remove();
                layer.msg('未通过', {icon:5,time:1000});
            });
    }
    /*产品-下架*/
    function product_stop(obj,id){
        layer.confirm('确认要下架吗？',function(index){
            $(obj).parents("tr").find(".td-manage").prepend('<a style="text-decoration:none" onClick="product_start(this,id)" href="javascript:;" title="发布"><i class="Hui-iconfont">&#xe603;</i></a>');
            $(obj).parents("tr").find(".td-status").html('<span class="label label-defaunt radius">已下架</span>');
            $(obj).remove();
            layer.msg('已下架!',{icon: 5,time:1000});
        });
    }

    /*产品-发布*/
    function product_start(obj,id){
        layer.confirm('确认要发布吗？',function(index){
            $(obj).parents("tr").find(".td-manage").prepend('<a style="text-decoration:none" onClick="product_stop(this,id)" href="javascript:;" title="下架"><i class="Hui-iconfont">&#xe6de;</i></a>');
            $(obj).parents("tr").find(".td-status").html('<span class="label label-success radius">已发布</span>');
            $(obj).remove();
            layer.msg('已发布!',{icon: 6,time:1000});
        });
    }

    /*产品-申请上线*/
    function product_shenqing(obj,id){
        $(obj).parents("tr").find(".td-status").html('<span class="label label-default radius">待审核</span>');
        $(obj).parents("tr").find(".td-manage").html("");
        layer.msg('已提交申请，耐心等待审核!', {icon: 1,time:2000});
    }
    // /*产品-编辑*/
    // function product_edit(cId){
    //     var index = layer.open({
    //         type: 2,
    //         title: '编辑商品信息',
    //         content: 'product-add.html?cId='+ cId,
    //         end: function() {
    //             location.reload();
    //         }
    //     });
    //     layer.full(index);
    // }


    /*产品-编辑*/
    function product_edit(title,url,cId){
        var index = layer.open({
            type: 2,
            title: title,
            content: 'product-add.html?cId='+ cId,

        });
        layer.full(index);
    }

    var OMGProduct={
        init:function () {
            OMGProduct.showlistOMGpage();
        },
//         showlistOMG:function () {
//             $.ajax({
//                 url:"/showOMGAll_product",
//                 data:{},
//                 type:"get",
//                 dataType:"json",
//                 success:function (data) {
//                     if(data.code==1){
//                         $("#OMGshow_product tr:gt(0)").remove();
//                         $.each(data.data,function (index,obj) {
//                             var tr=$("<tr class='text-c va-m' />");
//                             var td1=$("<td style='text-align: center;  '/>");
//                             var chb=$("<input type='checkbox' name='cIds' id='cIds'/>").val(obj.cId).appendTo(td1);
//                             tr.append(td1);
//                             var td2=$("<td style='text-align: center;  '/>").html(obj.cId);
//                             tr.append(td2);
//                             var td3=$("<td style='text-align: center;  '/>").html(obj.cName);
//                             tr.append(td3);
//                             // var td4=$("<td style='text-align: center;  '/>").html(obj.cModel);
//                             // tr.append(td4);
//                             var td5=$("<td style='text-align: center;  '/>").html(obj.cPrice);
//                             tr.append(td5);
//                             // var td6=$("<td style='text-align: center;  '/>").html(obj.cDescribe);
//                             // tr.append(td6);
//                             var td7=$("<td style='text-align: center;  '/>").html(obj.cState);
//                             tr.append(td7);
// //                      var tdimg=$("<td style='text-align: center;  '/>").html("<img src="+(obj.imgtb).imgname+"'../../../img' width='100px' height='80px'/>");
// //                      tr.append(tdimg);
//                             var td8=$("<td style='text-align: center;  '/>").html(obj.ctypetb.ctname);
//                             tr.append(td8);
//                             // var td9=$("<td style='text-align: center;  '/>").html(obj.cshelltb.csname);
//                             // tr.append(td9);
//                             // var td10=$("<td style='text-align: center;  '/>").html(obj.cchaintb.ccname);
//                             // tr.append(td10);
//                             // var td11=$("<td style='text-align: center;  '/>").html(obj.ccolortb.ccname);
//                             // tr.append(td11);
//                             // var td12=$("<td style='text-align: center;  '/>").html(obj.cdiametertb.cdname);
//                             // tr.append(td12);
//                             // var td13=$("<td style='text-align: center;  '/>").html(obj.cespeciallytb.cename);
//                             // tr.append(td13);
//                             // var td14=$("<td style='text-align: center;  '/>").html(obj.cmovementtb.cmname);
//                             // tr.append(td14);
//                             // var td15=$("<td style='text-align: center;  '/>").html(obj.cwaterprooftb.cwname);
//                             // tr.append(td15);
//                             var td16=$("<td class='td-status' style='text-align: center;  '/>");
//                             tr.append(td16);
//                             var span16=$("<span class=\"label label-success radius\">已发布</span>");
//                             td16.append(span16);
//                             var a16= $("<a style=\"text-decoration:none\" onClick=\"product_stop(this,'10001')\" href=\"javascript:;\" title=\"下架\"></a>");
//                             var i16=$("<i class=\"Hui-iconfont\"></i>").html("&#xe6de;");
//                             a16.append(i16);
//                             var del=$("<a href='#' class='delOMG' onclick='OMGProduct.deleteData("+obj.cId+")'>删除</a>");
//                             var  a17=$("<a style='text-decoration:none' class='ml-5' onClick='product_edit("+obj.cId+")'   href='javascript:;' title='编辑'  />");
//                             var i17=$("<i class='Hui-iconfont'   >&#xe6df;</i>").data("commodity",obj);
//                             a17.append(i17);
//                             $("<td class='td-manage'  />").append(a17).append(a16).append(del).appendTo(tr);
//                             $("#OMGshow_product").append(tr);
//                         })
//                     }
//                 }
//             });
//         },
        showlistOMGpage:function () {
            $.post('product/selcountdOMG_product',{},function (count) {
                $("#count").html(count.data);
                layui.use(['laypage', 'layer'], function() {
                    var laypage = layui.laypage
                        , layer = layui.layer;
                    //总页数大于页码总数
                    laypage.render({
                        elem: 'demo0' ,
                        limit: 3 ,
                        count:count.data ,
                        jump:function (obj) {
                            $.ajax({
                                url:"product/showOMGAllpage_product",
                                data:{param1:obj.curr,param2:obj.limit},
                                success:function (data) {
                                    if(data.code==1){
                                        $("#OMGshow_product tr:gt(0)").remove();
                                        $.each(data.data,function (index,obj) {
                                            var tr=$("<tr class='text-c va-m' />");
                                            var td1=$("<td style='text-align: center;  '/>");
                                            var chb=$("<input type='checkbox' name='cIdcs' id='cIdcs'/>").val(obj.cId).appendTo(td1);
                                            tr.append(td1);
                                            var td2=$("<td style='text-align: center;  '/>").html(obj.cId);
                                            tr.append(td2);
                                            var td3=$("<td style='text-align: center;  '/>").html(obj.cName);
                                            tr.append(td3);
                                            // var td4=$("<td style='text-align: center;  '/>").html(obj.cModel);
                                            // tr.append(td4);
                                            var td5=$("<td style='text-align: center;  '/>").html(obj.cPrice);
                                            tr.append(td5);
                                            // var td6=$("<td style='text-align: center;  '/>").html(obj.cDescribe);
                                            // tr.append(td6);
                                            // var td7=$("<td style='text-align: center;  '/>").html(obj.cState);
                                            // tr.append(td7);
                                            var tdimg=$("<td style='text-align: center;  '/>").html("<img src=img/"+obj.imgName+" width='100px' height='80px'/>");
                                            tr.append(tdimg);
                                            var td8=$("<td style='text-align: center;  '/>").html(obj.ctypetb.ctname);
                                            tr.append(td8);
                                            // var td9=$("<td style='text-align: center;  '/>").html(obj.cshelltb.csname);
                                            // tr.append(td9);
                                            // var td10=$("<td style='text-align: center;  '/>").html(obj.cchaintb.ccname);
                                            // tr.append(td10);
                                            // var td11=$("<td style='text-align: center;  '/>").html(obj.ccolortb.ccname);
                                            // tr.append(td11);
                                            // var td12=$("<td style='text-align: center;  '/>").html(obj.cdiametertb.cdname);
                                            // tr.append(td12);
                                            // var td13=$("<td style='text-align: center;  '/>").html(obj.cespeciallytb.cename);
                                            // tr.append(td13);
                                            // var td14=$("<td style='text-align: center;  '/>").html(obj.cmovementtb.cmname);
                                            // tr.append(td14);
                                            // var td15=$("<td style='text-align: center;  '/>").html(obj.cwaterprooftb.cwname);
                                            // tr.append(td15);
                                            var td16=$("<td class='td-status' style='text-align: center;  '/>");
                                            tr.append(td16);
                                            var span16=$("<span class=\"label label-success radius\">已发布</span>");
                                            td16.append(span16);
                                            var a16= $("<a style=\"text-decoration:none\" onClick=\"product_stop(this,'10001')\" href=\"javascript:;\" title=\"下架\"></a>");
                                            var i16=$("<i class=\"Hui-iconfont\"></i>").html("&#xe6de;");
                                            a16.append(i16);

                                            var  a17=$("<a style='text-decoration:none' class='ml-5' onClick='product_edit(\"编辑\",\"product-add.html\","+obj.cId+")'   href='javascript:;' title='编辑'  />");
                                            var i17=$("<i class='Hui-iconfont'   >&#xe6df;</i>").data("commodity",obj);
                                            a17.append(i17);
                                            var  a18=$("<a style='text-decoration:none' class='ml-5' onClick='OMGProduct.product_del("+obj.cId+",this)' href='javascript:;' title='删除'/>");
                                            var i18=$("<i class='Hui-iconfont'>&#xe6e2;</i>");
                                            a18.append(i18);
                                            $("<td class='td-manage'  />").append(a18).append(a17).append(a16).appendTo(tr);
                                            $("#OMGshow_product").append(tr);
                                        })
                                    }
                                }
                            })
                        }
                    })
                })


            })


        },
        /*产品-删除*/
        product_del:function(cId,obj){
            layer.confirm('确认要删除吗？',function(index){
                $.ajax({
                    type: 'POST',
                    url: 'product/delByIdOMG_product',
                    data:{"cId":cId},
                    dataType: 'json',
                    success: function(data){
                        $(obj).parents("tr").remove();
                        layer.msg('已删除!',{icon:1,time:1000});
                        OMGProduct.showlistOMGpage();
                    },
                    error:function(data) {
                        console.log(data.msg);
                    },
                });
            });
        },
//   //修改传值
//   updateproductURL:function (obj) {
//      alert("ad");
//      var commodity=$(obj).data("commodity");
//       $("#cId").val(commodity.cId);
//       $("#cName").val(commodity.cName);
//       $("#cModel").val(commodity.cModel);
//       $("#cPrice").val(commodity.cPrice);
//       $("#cDescribe").val(commodity.cDescribe);
//       $("#cTypeId ").val(commodity.cTypeId);
//       $("#cShellId ").val(commodity.cShellId);
//       $("#cChainId ").val(commodity.cChainId);
//       $("#cColorId").val(commodity.cColorId);
//       $("#cDiameterId").val(commodity.cDiameterId);
//       $("#cEspeciallyId").val(commodity.cEspeciallyId);
//       $("#cMovementId").val(commodity.cMovementId);
//       $("#cWaterproofId").val(commodity.cWaterproofId);
//   },
       //批量删除
        delsOmg_product:function(){
            var cIdsArray=$("input[name=cIdcs]:checked").serializeArray();
            // console.log(cIdsArray);
            var cIds=[];
            for(var i=0;i<cIdsArray.length;i++){
                cIds.push(parseInt(cIdsArray[i].value));
            }
            if(cIds.length>0){
            layer.confirm('确认要删除吗？',function(index){
                $.ajax({
                    url:"product/deletesOMG_product",
                    type:"POST",
                    data:JSON.stringify(cIds),
                    dataType:"json",
                    contentType:"application/json;charset=utf-8",
                    success:function (data) {
                        if(data.code==1&&data.data>0){
                            layer.msg('已删除!',{icon:1,time:1000});
                            OMGProduct.showlistOMGpage();
                        }else{
                            console.log(data.msg);
                        }
                    },
                    error:function () {
                        alert("删除错误");
                    }
                });
            });
		}else{
			layer.msg('请选择删除选项',{icon:2,time:1000});
		}

        },
        //模糊查询商品信息
        selsOmg_product:function () {
            $.ajax({
                url:"product/selectOMGByManytjzs_product",
                data:{cName :$("#ComName").val(),cModel:$("#ComModel").val(),cTName:$("#ComType").val()},
                success: function(data) {
                    $("#count").html(data.data);
                    layui.use(['laypage', 'layer'],function() {
                        var laypage = layui.laypage
                            , layer = layui.layer;
                        //总页数大于页码总数
                        laypage.render({
                            elem: 'demo0',
                            limit: 3,
                            count: data.data,
                            jump:function (obj) {
                                $.ajax({
                                    url:"product/SerselOMGByManytj_product",
                                    data:{param1:obj.curr,param2:obj.limit,cName :$("#ComName").val(),cModel:$("#ComModel").val(),cTName:$("#ComType").val()},
                                    success:function (data) {
                                        if(data.code==1){
                                            $("#OMGshow_product tr:gt(0)").remove();
                                            $.each(data.data,function (index,obj) {
                                                var tr=$("<tr class='text-c va-m' />");
                                                var td1=$("<td style='text-align: center;  '/>");
                                                var chb=$("<input type='checkbox' name='cIdcs' id='cIdcs'/>").val(obj.cId).appendTo(td1);
                                                tr.append(td1);
                                                var td2=$("<td style='text-align: center;  '/>").html(obj.cId);
                                                tr.append(td2);
                                                var td3=$("<td style='text-align: center;  '/>").html(obj.cName);
                                                tr.append(td3);
                                                var td5=$("<td style='text-align: center;  '/>").html(obj.cPrice);
                                                tr.append(td5);
                                                var tdimg=$("<td style='text-align: center;  '/>").html("<img src=img/"+obj.imgName+" width='100px' height='80px'/>");
                                                tr.append(tdimg);
                                                // var td8=$("<td style='text-align: center;  '/>").html(obj.ctypetb.ctname);
                                                // tr.append(td8);
                                                var td16=$("<td class='td-status' style='text-align: center;  '/>");
                                                tr.append(td16);
                                                var span16=$("<span class=\"label label-success radius\">已发布</span>");
                                                td16.append(span16);
                                                var a16= $("<a style=\"text-decoration:none\" onClick=\"product_stop(this,'10001')\" href=\"javascript:;\" title=\"下架\"></a>");
                                                var i16=$("<i class=\"Hui-iconfont\"></i>").html("&#xe6de;");
                                                a16.append(i16);
                                                var  a17=$("<a style='text-decoration:none' class='ml-5' onClick='product_edit(\"编辑\",\"product-add.html\","+obj.cId+")'   href='javascript:;' title='编辑'  />");
                                                var i17=$("<i class='Hui-iconfont'   >&#xe6df;</i>").data("commodity",obj);
                                                a17.append(i17);
                                                var  a18=$("<a style='text-decoration:none' class='ml-5' onClick='OMGProduct.product_del("+obj.cId+",this)' href='javascript:;' title='删除'/>");
                                                var i18=$("<i class='Hui-iconfont'>&#xe6e2;</i>");
                                                a18.append(i18);
                                                $("<td class='td-manage'  />").append(a18).append(a17).append(a16).appendTo(tr);
                                                $("#OMGshow_product").append(tr);
                                            })
                                        }
                                    }
                                })
                            }
                        });
                    })
                },
            });

        },
    }
    OMGProduct.init();


    $(function(){

        $(".st_tree").SimpleTree({

            /* 可无视代码部分*/
            click:function(a){
                if(!$(a).attr("hasChild"))
                    alert($(a).attr("ref"));
            }

        });

    });

    $("#selectOMGtj").click(function () {
        if ($("#ComName").val()==""&&$("#ComModel").val()==""&&$("#ComType").val()=="") {
           OMGProduct.showlistOMGpage();
        }else {
            OMGProduct.selsOmg_product();
        }
    })
</script>
</body>
</html>